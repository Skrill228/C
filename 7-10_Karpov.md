# Глава 7: Сети. 

## Введение

Сеть – основа инфраструктуры компании. Плохо спроектированная сеть негативно влияет на все компоненты системы. Проектирование сети тесно связано с внедрением инфраструктурных сервисов.

### Основные аспекты проектирования сетей:
- **Надежность**: Устойчивость к сбоям и обеспечение бесперебойной работы сервисов.
- **Документирование**: Подробная документация упрощает обслуживание и устранение неполадок.
- **Простота обслуживания**: Легкость диагностики и устранения проблем.
- **Пропускная способность**: Способность сети справляться с текущими и будущими нагрузками.
- **Потенциал роста**: Возможность масштабирования при увеличении потребностей.

### Рекомендации по изучению:
1. Perlman, _“Interconnections: Bridges, Routers, Switches, and Internetworking Protocols”_ (1999)
2. Stevens, _“TCP/IP Illustrated, Volume 1: The Protocols”_ (1994)
3. Comer, _“Internetworking with TCP/IP Volume One”_ (2000)
4. ... [Полный список авторов и книг]

---

## 7.1. Основы

### Цель:
Создание надежной, документированной, простой в обслуживании сети с высокой пропускной способностью и потенциалом роста.

**Факторы, влияющие на достижение цели**:
- Физические сети.
- Топология логических сетей.
- Документирование.
- Маршрутизация узлов.
- Протоколы маршрутизации.
- Мониторинг.
- Управление административными единицами.

---

### 7.1.1. Модель OSI
Сетевая модель, описывающая взаимодействие открытых систем. 

**7 уровней**:
1. **Физический**: Кабели, оптоволокно, радио.
2. **Канальный**: MAC-адресация, управление потоками данных.
3. **Сетевой**: Логическая адресация (IP), маршрутизация (RIP, OSPF, IGRP).
4. **Транспортный**: Доставка данных, проверка ошибок, восстановление (TCP).
5. **Сеансовый**: Управление сеансами связи (AppleTalk, PPTP).
6. **Представления**: Форматы данных, кодировка, сжатие, шифрование.
7. **Прикладной**: Протоколы приложений (SMTP, HTTP, FTP).

**Шуточные уровни**:
- Пользовательский.
- Финансовый.
- Политический.

---

### 7.1.2. Понятная архитектура
**Преимущества**:
- Простота восприятия.
- Упрощение управления и решения проблем.
- Легкость масштабирования.

Охватывает:
- Физическую и логическую топологию.
- Сетевые протоколы.
- Стратегию роста.

---

### 7.1.3. Топологии сетей
- **Звезда**: Центральный узел, подключены все остальные. Простая и экономичная.
- **Кольцо**: Каждый узел подключен к двум другим. Выход одного канала не влияет на связь.
- **Несколько звезд с резервными подключениями**: Компромисс между надежностью и затратами.
- **Хаос**: Интернет, высокоадаптивен и отказоустойчив.
- **Плоская топология**: Одна большая сеть уровня 2.
- **Топология на основе местоположения**: Устройства уровня 2 распределены по физическим зонам.
- **Топология на основе функциональных групп**: Логическая организация независимо от расположения.

---

### 7.1.4. Промежуточный кабельный узел (IDF)
- **Рекомендации**:
  - Использовать современные кабели (срок службы ≥ 5 лет).
  - Упростить подключение с помощью патч-панелей.
  - Защищать IDF (ограниченный доступ, планы этажей, доска изменений).
  - Обеспечить запас разъемов.

### 7.1.5. Центральный кабельный узел (MDF)
- Соединяет все IDF.
- Должен быть частью вычислительного центра.
- Обеспечивает запасные кабели и хорошую организацию.

---

### 7.1.6. Точки разграничения
- **Граница между организацией и провайдером услуг**.
- Важно знать их расположение и маркировать.

---

### 7.1.7. Документирование
- **Маркировка**: Ярлыки на патч-панелях, проводах, каналах.
- **Карты**:
  - Физической сети: расположение проводки, беспроводные точки.
  - Логической сети: топология, протоколы маршрутизации.
- **Онлайн-документация**: Конфигурация устройств с комментариями.

---

### 7.1.8. Простая маршрутизация
- Узлы сети используют статичные маршруты.
- Избегать динамической маршрутизации внутри одной площадки.

---

### 7.1.9. Сетевые устройства
- Использовать выделенные сетевые устройства (маршрутизаторы, коммутаторы).
- Преимущества: Быстродействие, надежность, удобство управления.

---

### 7.1.10. Оверлейные сети
- Логическая топология, наложенная на физическую.
- **Примеры**: VLAN, Frame Relay, ATM.
- Простота физического слоя, гибкость логического.

---

### 7.1.11. Количество поставщиков
- Минимизировать количество поставщиков для упрощения управления.
- Найти баланс между эксклюзивностью и разнообразием.

---

### 7.1.12. Стандартные протоколы
- Использовать проверенные стандарты (IETF, IEEE).
- Преимущества: Независимость от поставщиков, интеграция оборудования.

---

### 7.1.13. Мониторинг
- Оповещения в реальном времени.
- Сбор данных для анализа тенденций и прогнозирования.
- Оптимизация трафика, выявление аномалий.

---

### 7.1.14. Одна административная единица
- Преимущества: Единое управление, согласованность, координация.
- **Недостатки**: Возможные конфликты.
- Решение: Четкая структура управления.

---

## 7.2. Тонкости

### 7.2.1. Передовые технологии или надежность
- **Старые решения**: Надежные, проверенные временем.
- **Новые решения**: Увеличенная скорость, новые возможности.
- **Управление рисками**:
  - Сертификация в лаборатории.
  - Пошаговое развертывание.

---

### 7.2.2. Несколько административных единиц
- Разделение для повышения безопасности и независимости.
- Использование общепринятых стандартов.

---

## 7.3. Заключение

### Константы:
- Надежная архитектура.
- Четкая документация.
- Соответствие IDF и MDF стандартам.
- Единая административная единица.
- Стандартные открытые протоколы.
- Простая маршрутизация.
- Минимум поставщиков.

### Изменчивые аспекты:
- Типы проводки.
- Топологии.
- Устройства и протоколы.
- Методы мониторинга.


# Глава 8: Пространства имен

## Введение
Пространство имен — это набор уникальных ключей и связанных с ними атрибутов. Оно используется для организации и управления ресурсами, такими как:
- Регистрационные записи.
- Имена хостов.
- Списки сервисов и номеров портов.
- Карты расположения домашних каталогов.

**Примеры атрибутов**:
- Для пользователей: UID (UNIX) или SID (Windows), домашние каталоги, владельцы.
- Для хостов: IP-адреса, серийные номера оборудования, MAC-адреса и информация о пользователе.

Пространства имен могут быть:
- **Плоскими** (например, UID в UNIX).
- **Иерархическими** (например, дерево каталогов).

Важность пространств имен растет с увеличением масштаба и сложности системы.

---

## 8.1. Основы
### Ключевые принципы управления пространствами имен:
1. Политики по именам, долговечности, локальности и защищенности.
2. Процедуры добавления, изменения и удаления.
3. Централизованное управление.

---

### 8.1.1. Политики для пространств имен
#### 8.1.1.1. Назначение имен
Политика должна описывать:
- Какие имена разрешены и запрещены.
- Как выбирать имена.
- Как решать конфликты и перекрытия имен.
- Условия для переименования.

**Методы назначения имен**:
1. **Шаблонный**: использование строгих правил (например, `pc-####`).
2. **Тематический**: имена связаны с темой (планеты, кофе, и т.д.).
3. **Функциональный**: имена описывают роль или функцию (`dns1`, `web01`).
4. **Описательный**: имена отражают данные или расположение.
5. **Отсутствие метода**: отсутствие стандарта, конфликты решаются по мере поступления.

Слияние пространств имен при объединении компаний может стать как технической, так и политической проблемой.

---

#### 8.1.1.2. Контроль доступа
Политика должна определить:
- Кто имеет доступ к просмотру и изменению пространства имен.
- Какие уровни безопасности применяются.

**Примеры**:
- Ограничение доступа к паролям.
- Возможность изменения определенных параметров только владельцем записи.
- Резервное копирование и контроль изменений.

---

#### 8.1.1.3. Долговечность
- Некоторые записи должны автоматически удаляться после завершения срока действия или бездействия.
- Долговечность имен, известных пользователям (например, почтовых адресов), должна быть высокой.
- Использование псевдонимов позволяет абстрагироваться от имени сервера.

---

#### 8.1.1.4. Вопросы сферы действия
Политика определяет:
- Диаметр (географический охват пространства имен).
- Плотность (количество сервисов, использующих пространство имен).

**Пример**: Идентификатор сотрудника используется для логина, почты, доступа к VPN и других сервисов.

---

#### 8.1.1.5. Целостность
- Высокая целостность подразумевает одинаковые атрибуты имени во всех системах.
- Политики назначения имен могут значительно упростить интеграцию и предотвращать конфликты.

---

#### 8.1.1.6. Повторное использование
- Политика должна определять, когда имя может быть повторно использовано.
- Для почтовых адресов рекомендуется период ожидания перед повторным использованием.

---

### 8.1.2. Процедуры изменения пространства имен
Процедуры добавления, изменения и удаления элементов должны быть:
- Задокументированы.
- Понятны новым системным администраторам.

---

### 8.1.3. Централизация управления
Централизованное управление обеспечивает:
- Целостность.
- Упрощение управления.
- Возможность автоматизации.

**Пример**: Хранение всех файлов пространства имен в одной директории с системой управления версиями (например, RCS).

---

## 8.2. Тонкости
### 8.2.1. Централизация в одной базе данных
- Хранение всех пространств имен в базе данных SQL.
- Разработка интерфейсов для управления данными.

---

### 8.2.2. Дальнейшая автоматизация
- После установления основ автоматизация упрощается.
- Примеры:
  - Генерация списков рассылки из корпоративной директории.
  - Проверка безопасности с использованием данных пространства имен.

---

### 8.2.3. Обновление, управляемое пользователем
- Автоматизация действий, выполняемых пользователями.
- Пример: создание учетных записей в университетах на основе базы данных студентов.

---

### 8.2.4. Эффективное использование
Пространства имен могут использоваться не только для ИТ, но и для других инфраструктур:
- Офисные АТС.
- Системы голосовой почты.
- Системы доступа по смарт-картам.

---

## 8.3. Заключение
- Пространства имен требуют четких правил и процедур.
- Централизация и автоматизация улучшают их управление.
- Эффективное управление пространствами имен способствует стабильной работе всей системы.


# Конспект главы 9: Документация

## Введение
Документирование — это:
- Ведение записей о местонахождении и принципах работы ресурсов.
- Обеспечение доступности полезной информации для пользователей.

### Зачем нужна документация?
- Помогает справляться с повторяющимися задачами.
- Облегчает передачу обязанностей.
- Повышает воспроизводимость процессов и предотвращает ошибки.
- Создает «память» организации, способствующую обучению и развитию команды.

---

## 9.1. Основы

### 9.1.1. Что документировать?
- **Сложные процессы**: Многоэтапные действия с риском ошибок (например, настройка рабочего места нового сотрудника).
- **Нелюбимые задачи**: Документирование упрощает их передачу другим.
- **Повторяющиеся вопросы**: Создание инструкций для часто задаваемых вопросов пользователей.

### 9.1.2. Простой шаблон документации
1. **Название**: Понятное и короткое.
2. **Метаданные**: Контакты автора, дата последней редакции.
3. **Описание задачи**: Краткое объяснение цели документа.
4. **Шаги выполнения**: Подробные инструкции с пояснениями.

**Совет**: Проверяйте точность документа, тестируя его самостоятельно или с помощью коллег.

### 9.1.3. Простые источники для документации
1. **Скриншоты**: Сохраняйте изображения для визуальной поддержки.
2. **Командная строка**: Используйте команды `script` и `history` для сохранения сеансов.
3. **Электронная почта**: Собирайте полезные письма и преобразуйте их в документы.
4. **Системы заявок**: Используйте записи заявок для создания базы знаний.

### 9.1.4. Преимущества контрольных листов
- Организованные списки действий для сложных задач.
- Возможность отметить завершенные шаги.
- Удобны для передачи задач менее опытным сотрудникам.

### 9.1.5. Хранение документации
- Централизованное хранилище упрощает поиск и обновление документов.
- Используйте системы контроля версий (например, SubVersion).
- Создайте начальную структуру директорий с описательными названиями.

### 9.1.6. Системы Wiki
- Упрощают совместное редактирование и обновление документации.
- Поддерживают версии, контроль доступа и форматирование.
- Позволяют любому пользователю исправлять ошибки или добавлять комментарии.

### 9.1.7. Средства поиска
- Важный элемент для функционирования хранилища.
- Возможности: полнотекстовый поиск, фильтрация по метаданным, сложные запросы.

---

## 9.2. Тонкости

### 9.2.1. Динамическое хранилище документов
- Документация должна регулярно обновляться.
- Пример: использование Wiki для живой документации.

### 9.2.2. Системы управления содержимым (CMS)
- Три уровня:
  - **Хранилище**: база данных или файловая система.
  - **История**: контроль версий, разрешения, события.
  - **Представление**: пользовательский интерфейс.
- Популярные системы: Drupal, MediaWiki.

### 9.2.3. Культура отношения
- Установите прозрачные правила, чтобы пользователи могли оставлять комментарии и исправления.
- Контроль версий помогает откатить изменения при ошибках.

### 9.2.4. Структурирование
- Не вводите слишком жесткое структурирование на начальном этапе.
- Фокусируйтесь на простоте внесения записей.

---

## Применение документации

### 9.2.5. Служба самостоятельной помощи
- Разделы с How-To и часто задаваемыми вопросами (FAQ).
- Примеры: настройка удаленного доступа, VPN, синхронизация устройств.

### 9.2.6. Внутренние документы группы
- Используются для сложных процессов, известных ограниченному числу сотрудников.
- Формируют «память» подразделения.

### 9.2.7. Справочные списки
- Примеры:
  - Контакты поставщиков.
  - Серийные номера оборудования.
  - Списки сокращений, лицензий и т. д.

---

## Заключение
- Документация упрощает повторение процессов, передачу обязанностей и обучение.
- Хорошо организованное хранилище экономит время и снижает количество ошибок.
- Использование Wiki и CMS делает работу с документами доступной и удобной.


# Конспект главы 10: Аварийное восстановление и целостность данных

## План аварийного восстановления
План аварийного восстановления рассматривает возможные нештатные ситуации, которые могут затронуть компанию, и описывает реакции на эти события. Основная цель — минимизировать последствия нештатных ситуаций и обеспечить быстрое восстановление ключевых служб.

### Основные этапы планирования аварийного восстановления:
1. **Определение требований**: анализ возможных нештатных ситуаций, их вероятности, стоимости для компании и скорости восстановления бизнес-процессов.
2. **Анализ рисков**: исследование рисков, с которыми может столкнуться компания, а также их возможные издержки.

## 10.1. Основы аварийного восстановления

### 10.1.1. Определение нештатной ситуации
Нештатная ситуация — это катастрофическое событие, которое вызывает значительный сбой, влияющий на работу всего здания или сайта. Примеры:
- Стихийные бедствия (землетрясения, наводнения).
- Техногенные происшествия (повреждения кабелей, отказ оборудования).

Нештатная ситуация может серьёзно повлиять на возможность компании вести бизнес.

**Пример**: Пожар на предприятии в Ирландии, когда сотрудники выбрасывали оборудование из окна, чтобы спасти его от огня, рискуя своей жизнью из-за недостаточного планирования.

### 10.1.2. Анализ рисков
Анализ рисков включает:
1. Оценку вероятности возникновения различных нештатных ситуаций.
2. Оценку возможных издержек для компании в случае каждой из ситуаций.
3. Определение бюджета на смягчение последствий этих рисков.

**Пример**:
- Вероятность наводнения: 1 шанс из миллиона.
- Издержки от наводнения: 10 млн долларов.
- Бюджет на предупреждение: 10 долларов.

Для других ситуаций, например землетрясений или отказов оборудования, рассчитывается подходящий бюджет для снижения рисков.
## 10.1.3. Правовые обязательства

Помимо издержек компании, в процессе планирования аварийного восстановления необходимо учитывать правовые обязательства перед поставщиками, клиентами и акционерами, касающиеся выполнения контрактных обязательств. Например:
- Открытые акционерные общества должны соблюдать нормы фондовых рынков.
- Университеты имеют контрактные обязательства перед своими студентами.
- Нужно соблюдать строительные нормы и правила и требования техники безопасности.

Юридический отдел должен четко разъяснить эти обязательства. Они могут быть оформлены как «Компания должна иметь возможность возобновить доставку продукта в течение недели» или «Компания может задержать подачу квартальной отчетности не более чем на 3 дня». Эти обязательства должны быть включены в требования к плану аварийного восстановления и определять, как быстро должна быть восстановлена работоспособность различных компонентов инфраструктуры.

---

## 10.1.4. Ограничение ущерба

Ограничение ущерба — это процесс снижения издержек, вызванных нештатными ситуациями. Он может быть достигнут как с минимальными затратами, так и с большими дополнительными расходами. Некоторые меры, такие как правильное размещение оборудования, могут быть экономичными:
- Размещение основных структур на высоте в затопляемых районах.
- Использование прочных стоек для установки оборудования на землетрясенных территориях.
- Применение громоотводов в районах с частыми грозами.

Однако более сложные меры, например строительство подземных вычислительных центров или использование дорогостоящих систем защиты от землетрясений, могут быть оправданы только в крупных компаниях.

Ограничение ущерба, связанное с серьезными авариями, всегда требует анализа прибыли и издержек. Например, системы пожаротушения и источники бесперебойного питания должны быть тщательно продуманы.

---

## 10.1.5. Подготовка

Подготовка к нештатной ситуации включает:
- Резервирование оборудования и помещений.
- Заключение договоров на замену оборудования.
- Оценка времени, необходимого для восстановления.

Важным этапом является наличие актуальных резервных копий данных, а также проверка скорости их получения от сторонних компаний по хранению данных. Также необходимо продумать альтернативные офисные помещения для выполнения ключевых функций компании.

**Пример**: В Калифорнии компания успешно переместила свой центр обработки вызовов на открытое место после землетрясения, и продолжила работу без прерываний.

---

## 10.1.6. Целостность данных

Целостность данных означает их неизменность и защиту от повреждения. Это может быть связано как с внешними атаками (вирусами, вмешательством злоумышленников), так и с случайными повреждениями (сбои оборудования, ошибки пользователей). Для обеспечения целостности данных используются:
- Контрольные суммы.
- Проверки на большие изменения или удаления в базе данных.

Также важно иметь возможность восстановления данных, например, через синхронизацию всех баз данных для аварийного восстановления. Это необходимо для защиты интеллектуальной собственности и обеспечения доверия к данным в случае юридических споров.

---

## 10.2. Тонкости

Полная подготовка к нештатной ситуации требует наличия резервных версий всего необходимого для восстановления работы компании. Резервный сайт с необходимыми системами играет важную роль.

### 10.2.1. Резервный сайт

Для компаний с высокой доступностью необходимо наличие полноценного резервного сайта, который располагается в другой зоне, не затронутой той же нештатной ситуацией. Такие меры могут включать:
- Дублирование критических служб в различных вычислительных центрах.
- Использование резервного оборудования, которое можно оперативно отправить в альтернативное помещение в случае повреждения основного.

---

### 10.2.2. Нарушения безопасности

Нарушения безопасности, такие как хакерские атаки, похищение данных или вирусные заражения, становятся всё более актуальной угрозой. Для защиты данных важно провести анализ рисков и обеспечить защиту системы с помощью барьеров или мониторинга.

При покупке систем следует тщательно проверять их безопасность и способы восстановления данных после атак.

---

### 10.2.3. Отношения с прессой

В случае чрезвычайной ситуации важно заранее подготовить план взаимодействия с прессой. Это включает:
- Кто будет общаться с журналистами.
- Что и как будет сказано.
- Как будет осуществляться цепочка принятия решений.

Заблаговременное планирование с PR-компанией помогает избежать паники и управлять общественным мнением во время кризиса.
 ### 10.3. Заключение

Основным аспектом аварийного планирования является четкое понимание того, какие службы являются критически важными для бизнеса и какие временные рамки нужны для их восстановления. Ответственные за планирование должны быть осведомлены о возможных чрезвычайных ситуациях и связанных с ними расходах, прежде чем завершить анализ рисков и определить бюджет на ограничение ущерба.




